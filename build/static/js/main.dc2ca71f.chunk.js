(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n.n(r),a=n(3),o=n(1),u=n(4),s=n.n(u),i="/api/persons",d=function(){return s.a.get(i).then((function(e){return e.data}))},f=function(e,t){return s.a.post(i,{name:e,number:t}).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(i,"/").concat(e))},b=function(e,t){return s.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},l=n(0),m=function(e){var t=e.searchName,n=e.setSearchName;return Object(l.jsxs)("div",{children:["Search for name:"," ",Object(l.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},h=function(e){var t=e.newName,n=e.setNewName,r=e.newNumber,c=e.setNewNumber,a=e.addPerson,o=e.focusName;return Object(l.jsxs)("form",{onSubmit:a,children:[Object(l.jsxs)("div",{children:["Name:"," ",Object(l.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)},required:!0,autoComplete:"off",ref:o})]}),Object(l.jsxs)("div",{children:["Number:"," ",Object(l.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)},required:!0,autoComplete:"off"})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(e){var t=e.persons,n=e.searchName,r=e.deletePerson;return t.length?Object(l.jsx)("ul",{style:{listStyle:"none",padding:0},children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(l.jsxs)("li",{children:[e.name," ",e.number," \xa0",Object(l.jsx)("button",{onClick:function(){return r(e.id,e.name)},children:"Delete"})]},e.name)}))}):Object(l.jsx)("p",{children:"Loading contacts..."})},p=function(e){var t=e.message,n=e.type,r=e.setMessage,c=e.setType;return Object(o.useEffect)((function(){if(t){var e=setTimeout((function(){r(null),c("")}),5e3);return function(){return clearTimeout(e)}}}),[t]),t?Object(l.jsx)("div",{className:n,children:t}):null},N=(n(38),function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),u=Object(a.a)(c,2),s=u[0],i=u[1],N=Object(o.useState)(""),x=Object(a.a)(N,2),v=x[0],w=x[1],g=Object(o.useState)(""),y=Object(a.a)(g,2),S=y[0],C=y[1],k=Object(o.useState)(null),P=Object(a.a)(k,2),T=P[0],D=P[1],E=Object(o.useState)(""),A=Object(a.a)(E,2),L=A[0],q=A[1],I=Object(o.useRef)(),J=function(){i(""),w(""),I.current.focus()};Object(o.useEffect)((function(){d().then(r)}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(p,{message:T,type:L,setMessage:D,setType:q}),Object(l.jsx)(m,{searchName:S,setSearchName:C}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(h,{newName:s,setNewName:i,newNumber:v,setNewNumber:w,addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===s}));t?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&b(t.id,{number:v}).then((function(e){r(n.map((function(t){return t.id===e.id?e:t}))),D("Updated ".concat(s,"'s number")),q("info"),J()})).catch((function(e){"TypeError"===e.name?(D("Information of ".concat(s," has already been deleted")),r(n.filter((function(e){return e.id!==t.id})))):D(e.response.data.error),q("error")})):f(s,v).then((function(e){r(n.concat(e)),D("Added ".concat(s)),q("info"),J()})).catch((function(e){D(e.response.data.error),q("error")}))},focusName:I}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(O,{persons:n,searchName:S,deletePerson:function(e,t){window.confirm("Delete ".concat(t,"?"))&&j(e).then((function(){r(n.filter((function(t){return t.id!==e}))),D("Deleted ".concat(t)),q("info")}))}})]})});c.a.render(Object(l.jsx)(N,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.dc2ca71f.chunk.js.map